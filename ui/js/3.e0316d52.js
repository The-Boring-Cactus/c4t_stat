(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"8a5d":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c4tgrid"},[s("q-banner",{staticClass:"bg-grey-1",attrs:{dense:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[s("q-icon",{attrs:{name:"mdi-database-outline",color:"primary"}})]},proxy:!0}])},[t.titleedit?t._e():s("div",{staticClass:"text-h5 text-weight-bolder",on:{dblclick:t.startEdit}},[t._v("\n          "+t._s(t.myTitle)+"\n      ")]),t.titleedit?s("input",{directives:[{name:"model",rawName:"v-model",value:t.myTitle,expression:"myTitle"}],staticClass:"text-h5 text-weight-bolder",domProps:{value:t.myTitle},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.endEdit(e)},input:function(e){e.target.composing||(t.myTitle=e.target.value)}}}):t._e()]),s("table",{staticClass:"c4tCore"},[s("thead",[s("th"),t._l(t.allColums,(function(e){return s("th",{key:e.keys},[s("div",{staticClass:"relative"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"col.title"}],staticClass:"colHeader",attrs:{col:e.key},domProps:{value:e.title},on:{input:function(s){s.target.composing||t.$set(e,"title",s.target.value)}}})])])}))],2),s("tbody",t._l(t.allRow,(function(e){return s("tr",{key:e.row},[s("th",[t._v(t._s(e.row))]),t._l(e.data,(function(r){return s("td",{key:r.c},[s("input",{directives:[{name:"model",rawName:"v-model",value:r.d,expression:"col.d"}],ref:"r"+e.row+"_c"+r.c,refInFor:!0,attrs:{id:"r"+e.row+"_c"+r.c,r:e.row,c:r.c},domProps:{value:r.d},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enterPressed(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.upPressed(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.downPressed(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.leftPressed(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])||"button"in e&&2!==e.button?null:t.rightPressed(e)}],input:function(e){e.target.composing||t.$set(r,"d",e.target.value)}}})])}))],2)})),0)]),s("q-dialog",{attrs:{persistent:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}},[s("q-card",{staticStyle:{"min-width":"350px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Data Name")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.newDataSet(e)}},model:{value:t.myTitle,callback:function(e){t.myTitle=e},expression:"myTitle"}})],1),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"},on:{click:function(e){return t.$router.push("/")}}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Ok"},on:{click:function(e){return t.newDataSet()}}})],1)],1)],1)],1)},i=[],a=(s("5319"),s("ec26")),o=s("f13c"),n={name:"DataGrid",props:{dataId:{type:String,default:"",required:!1},title:{type:String,default:"",required:!1},data:{type:Array,required:!1}},data:function(){return{prompt:!1,cols:[],rows:[],titleedit:!1,myTitle:"",id:""}},created:function(){if("undefined"===typeof this.dataId||""===this.dataId){for(var t=[],e=0;e<26;e++){var s={key:e,title:this.i_to_coll(e)};t.push(s)}this.cols=t;for(var r=[],i=1;i<=50;i++){for(var o=[],n=0;n<26;n++){var l={c:n,d:""};o.push(l)}var c={row:i,data:o};r.push(c)}this.rows=r,this.prompt=!0,this.id=Object(a["a"])()}else{console.log("Look for data"),this.id=this.dataId,this.myTitle=this.title;var u=this;pywebview.api.getData(this.id).then((t=>{u.cols=t.data.data.cols,u.rows=t.data.data.rows}))}},beforeDestroy:function(){var t={cols:this.cols,rows:this.rows},e=JSON.stringify(t);pywebview.api.insert(this.id,this.myTitle,e).then((t=>{console.log(t.message)}))},computed:{allColums:function(){return this.cols},allRow:function(){return this.rows}},methods:{i_to_coll:t=>t<26?String.fromCharCode(t+65):String.fromCharCode(t/26+64)+String.fromCharCode(t%26+65),int:t=>Number.parseInt(t,10),endEdit:function(){this.titleedit=!1},addCol:function(){var t=this.cols.length,e={key:t,title:this.i_to_coll(t)};this.cols.push(e);var s=[];this.rows.forEach((e=>{e.data.push({c:t,d:""}),s.push(e)})),this.rows=s},addRow:function(){for(var t=this.rows.length+1,e=this.cols.length,s=[],r=0;r<e;r++){var i={c:r,d:""};s.push(i)}var a={row:t,data:s};this.rows.push(a)},setFocus:function(t){this.$refs[t][0].focus()},enterPressed:function(t){var e=this.rows.length,s=this.cols.length-1,r=t.target.id.replace("r","").replace("c","").split("_"),i=Number.parseInt(r[0],10),a=Number.parseInt(r[1],10),o=1,n="r"+o+"_c"+a;if(e===i)if(o=1,s===a)this.addCol(),this.$nextTick((()=>{var t=a+1,e="r"+o+"_c"+t;this.setFocus(e)}));else{var l=a+1;n="r"+o+"_c"+l,this.setFocus(n)}else o=i+1,n="r"+o+"_c"+a,this.setFocus(n)},saveData:function(){var t={cols:this.cols,rows:this.rows},e=JSON.stringify(t);pywebview.api.insert(this.id,this.myTitle,e).then((t=>{console.log(t.message)}))},newDataSet:function(){this.prompt=!1,this.$emit("newDataset",this.myTitle,this.id);var t={cols:this.cols,rows:this.rows},e=JSON.stringify(t);pywebview.api.insert(this.id,this.myTitle,e).then((t=>{console.log(t.message)}))},upPressed:function(t){var e=t.target.id.replace("r","").replace("c","").split("_"),s=Number.parseInt(e[0],10)-1,r=Number.parseInt(e[1],10);if(s>=1){var i="r"+s+"_c"+r;this.setFocus(i)}},downPressed:function(t){var e=this.rows.length,s=t.target.id.replace("r","").replace("c","").split("_"),r=Number.parseInt(s[0],10),i=Number.parseInt(s[1],10);if(e===r)this.addRow(),this.$nextTick((()=>{var t=r+1,e="r"+t+"_c"+i;this.setFocus(e),o.scrollTo("#r"+t+"_c"+i,.1,{container:"q-app",duration:500,easing:"ease",offset:0,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0})}));else{var a=r+1,n="r"+a+"_c"+i;this.setFocus(n)}},leftPressed:function(t){var e=t.target.id.replace("r","").replace("c","").split("_"),s=Number.parseInt(e[0],10),r=Number.parseInt(e[1],10)-1;if(r>=0){var i="r"+s+"_c"+r;this.setFocus(i)}},rightPressed:function(t){var e=this.cols.length-1,s=t.target.id.replace("r","").replace("c","").split("_"),r=Number.parseInt(s[0],10),i=Number.parseInt(s[1],10);if(e===i)this.addCol(),this.$nextTick((()=>{var t=i+1,e="r"+r+"_c"+t;this.setFocus(e)}));else{var a=i+1,o="r"+r+"_c"+a;this.setFocus(o)}},startEdit:function(t){console.log("Double click"),console.log(this),this.titleedit=!0}}},l=n,c=(s("97ac"),s("2877")),u=Object(c["a"])(l,r,i,!1,null,"aa173af4",null);e["default"]=u.exports},"97ac":function(t,e,s){"use strict";s("a1ae")},a1ae:function(t,e,s){}}]);